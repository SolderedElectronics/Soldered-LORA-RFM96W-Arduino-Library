<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.3"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LoRa RFM96W Arduino library: LoRa module initialization</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">LoRa RFM96W Arduino library<span id="projectnumber">&#160;1.0.0</span>
   </div>
   <div id="projectbrief">This is a library for the LoRa RFM96W</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.3 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('md_src_libs__beelan__lo_ra_w_a_n_2_0_0__a_p_i.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">LoRa module initialization </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p >Initialize LoRa/LoRaWAN module. Must be called once in the Arduino setup block.</p>
<h3><a class="anchor" id="autotoc_md62"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> init(<span class="keywordtype">void</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md63"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>();</div>
<div class="line">  ...</div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a1282c88d2317fcf7c318a5efeab2afc2"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">LoRaWANClass::init</a></div><div class="ttdeci">bool init(void)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:45</div></div>
<div class="ttc" id="alorawan-arduino-rfm_8cpp_html_a0d77a82962c460e40c0eb9616a1498d7"><div class="ttname"><a href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a></div><div class="ttdeci">LoRaWANClass lora</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:462</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md64"></a>
Setup Authentication Keys for ABP activation</h2>
<p >Setup authentication keys for your LoRaWAN device, including device address.</p>
<h3><a class="anchor" id="autotoc_md65"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setAppSKey(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *ApskKey_in);</div>
<div class="line"><span class="keywordtype">void</span> setNwkSKey(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *NwkKey_in);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md66"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">  <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Put Antares Key and DevAddress here</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a31e738c13953856b7f1347bfa56a826b">setNwkSKey</a>(<span class="stringliteral">&quot;b7300d9f68b649ed30530f9dd69f9afe&quot;</span>);</div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a6d7a0d7c9409e5122dbd97c79608fa00">setAppSKey</a>(<span class="stringliteral">&quot;9d52eef7fab63eda18794d0e503ddf20&quot;</span>);</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a31e738c13953856b7f1347bfa56a826b"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a31e738c13953856b7f1347bfa56a826b">LoRaWANClass::setNwkSKey</a></div><div class="ttdeci">void setNwkSKey(const char *NwkKey_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:217</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a6d7a0d7c9409e5122dbd97c79608fa00"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a6d7a0d7c9409e5122dbd97c79608fa00">LoRaWANClass::setAppSKey</a></div><div class="ttdeci">void setAppSKey(const char *ApskKey_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:229</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md67"></a>
Setup Device address</h2>
<p >Setup device address for activating the device.</p>
<h3><a class="anchor" id="autotoc_md68"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setDevAddr(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *devAddr_in);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md69"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">  <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Put Antares Key and DevAddress here</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a7c6abcd389cf1e7d467b0ce7e41aeb44">setDevAddr</a>(<span class="stringliteral">&quot;07000007&quot;</span>);</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a7c6abcd389cf1e7d467b0ce7e41aeb44"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a7c6abcd389cf1e7d467b0ce7e41aeb44">LoRaWANClass::setDevAddr</a></div><div class="ttdeci">void setDevAddr(const char *devAddr_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:241</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md70"></a>
Setup Authentication Keys for OTAA activation</h2>
<p >Setup authentication keys for your LoRaWAN device, including device address.</p>
<h3><a class="anchor" id="autotoc_md71"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setDevEUI(<span class="keyword">const</span> <span class="keywordtype">char</span> *devEUI_in);</div>
<div class="line"><span class="keywordtype">void</span> setAppEUI(<span class="keyword">const</span> <span class="keywordtype">char</span> *appEUI_in);</div>
<div class="line"><span class="keywordtype">void</span> setAppKey(<span class="keyword">const</span> <span class="keywordtype">char</span> *appKey_in);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md72"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Put OTAA credentials here</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a69eb01aec7edf1fc240253bb52c1ecde">setDevEUI</a>(<span class="stringliteral">&quot;b7300d9f68b649ed&quot;</span>);</div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a165eb2e0bdbabc5dfe96e139e60ea62e">setAppEUI</a>(<span class="stringliteral">&quot;8b649ed30530f9dd&quot;</span>);</div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a892c6d889811bea726d12f56f94225a5">setAppKey</a>(<span class="stringliteral">&quot;9d52eef7fab63eda18794d0e503ddf20&quot;</span>);</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a165eb2e0bdbabc5dfe96e139e60ea62e"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a165eb2e0bdbabc5dfe96e139e60ea62e">LoRaWANClass::setAppEUI</a></div><div class="ttdeci">void setAppEUI(const char *appEUI_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:194</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a69eb01aec7edf1fc240253bb52c1ecde"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a69eb01aec7edf1fc240253bb52c1ecde">LoRaWANClass::setDevEUI</a></div><div class="ttdeci">void setDevEUI(const char *devEUI_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:183</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a892c6d889811bea726d12f56f94225a5"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a892c6d889811bea726d12f56f94225a5">LoRaWANClass::setAppKey</a></div><div class="ttdeci">void setAppKey(const char *appKey_in)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:205</div></div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md73"></a>
Join Procedure</h2>
<p >Need to join in the network</p>
<h3><a class="anchor" id="autotoc_md74"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">bool</span> join();</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md75"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set LoRaWAN Class change CLASS_A or CLASS_C</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#ad05db623fba6fdcba1ff0aedc70c99b0">setDeviceClass</a>(<a class="code hl_enumvalue" href="_struct_8h.html#ad64d6ae91e37e0472faa91f9f619871ca307ee33f71385819abc142fe4f23c3bb">CLASS_A</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set Data Rate</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a487c4a583cb809a2cfc6ddad19acb0fa">setDataRate</a>(<a class="code hl_enumvalue" href="_struct_8h.html#a7bbc2a4d70ac9a684581ffb96e2513f7a175b1fcce496893fd64ec1ac7147294f">SF9BW125</a>);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// set channel to random</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a3a837acdbe60fbf82bc91a0aff5fac80">setChannel</a>(<a class="code hl_enumvalue" href="_struct_8h.html#a30e77e0b6fd428a0cceed4edb1ddbd20a3b6e3be2dfacfb1d14722ea50147ac05">MULTI</a>);</div>
<div class="line">  </div>
<div class="line">  <span class="comment">// Put OTAA Key and DevAddress here</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a69eb01aec7edf1fc240253bb52c1ecde">setDevEUI</a>(devEui);</div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a165eb2e0bdbabc5dfe96e139e60ea62e">setAppEUI</a>(appEui);</div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a892c6d889811bea726d12f56f94225a5">setAppKey</a>(appKey);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Join procedure</span></div>
<div class="line">  <span class="keywordtype">bool</span> isJoined;</div>
<div class="line">  <span class="keywordflow">do</span> {</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;Joining...&quot;</span>);</div>
<div class="line">    isJoined = <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a05d38e88befefb3ffb04b1b662207d14">join</a>();</div>
<div class="line">    </div>
<div class="line">    <span class="comment">//wait for 10s to try again</span></div>
<div class="line">    delay(10000);</div>
<div class="line">  }<span class="keywordflow">while</span>(!isJoined);</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;Joined to network&quot;</span>);</div>
<div class="line">}</div>
<div class="ttc" id="a_struct_8h_html_a30e77e0b6fd428a0cceed4edb1ddbd20a3b6e3be2dfacfb1d14722ea50147ac05"><div class="ttname"><a href="_struct_8h.html#a30e77e0b6fd428a0cceed4edb1ddbd20a3b6e3be2dfacfb1d14722ea50147ac05">MULTI</a></div><div class="ttdeci">@ MULTI</div><div class="ttdef"><b>Definition:</b> Struct.h:113</div></div>
<div class="ttc" id="a_struct_8h_html_a7bbc2a4d70ac9a684581ffb96e2513f7a175b1fcce496893fd64ec1ac7147294f"><div class="ttname"><a href="_struct_8h.html#a7bbc2a4d70ac9a684581ffb96e2513f7a175b1fcce496893fd64ec1ac7147294f">SF9BW125</a></div><div class="ttdeci">@ SF9BW125</div><div class="ttdef"><b>Definition:</b> Struct.h:125</div></div>
<div class="ttc" id="a_struct_8h_html_ad64d6ae91e37e0472faa91f9f619871ca307ee33f71385819abc142fe4f23c3bb"><div class="ttname"><a href="_struct_8h.html#ad64d6ae91e37e0472faa91f9f619871ca307ee33f71385819abc142fe4f23c3bb">CLASS_A</a></div><div class="ttdeci">@ CLASS_A</div><div class="ttdef"><b>Definition:</b> Struct.h:156</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a05d38e88befefb3ffb04b1b662207d14"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a05d38e88befefb3ffb04b1b662207d14">LoRaWANClass::join</a></div><div class="ttdeci">bool join(void)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:161</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a3a837acdbe60fbf82bc91a0aff5fac80"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a3a837acdbe60fbf82bc91a0aff5fac80">LoRaWANClass::setChannel</a></div><div class="ttdeci">void setChannel(unsigned char channel)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:323</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_a487c4a583cb809a2cfc6ddad19acb0fa"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#a487c4a583cb809a2cfc6ddad19acb0fa">LoRaWANClass::setDataRate</a></div><div class="ttdeci">void setDataRate(unsigned char data_rate)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:298</div></div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_ad05db623fba6fdcba1ff0aedc70c99b0"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#ad05db623fba6fdcba1ff0aedc70c99b0">LoRaWANClass::setDeviceClass</a></div><div class="ttdeci">void setDeviceClass(devclass_t dev_class)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:269</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md76"></a>
Set Device Class</h2>
<p >Set class of the device (Class A or Class C). Input as <code>CLASS_A</code> or <code>CLASS_C</code> enum. </p>
<h3><a class="anchor" id="autotoc_md77"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setDeviceClass(<a class="code hl_enumeration" href="_struct_8h.html#ad64d6ae91e37e0472faa91f9f619871c">devclass_t</a> dev_class);</div>
<div class="ttc" id="a_struct_8h_html_ad64d6ae91e37e0472faa91f9f619871c"><div class="ttname"><a href="_struct_8h.html#ad64d6ae91e37e0472faa91f9f619871c">devclass_t</a></div><div class="ttdeci">devclass_t</div><div class="ttdef"><b>Definition:</b> Struct.h:156</div></div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md78"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">  <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set LoRaWAN Class</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#ad05db623fba6fdcba1ff0aedc70c99b0">setDeviceClass</a>(<a class="code hl_enumvalue" href="_struct_8h.html#ad64d6ae91e37e0472faa91f9f619871ca307ee33f71385819abc142fe4f23c3bb">CLASS_A</a>);</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --> <h2><a class="anchor" id="autotoc_md79"></a>
Set Channel</h2>
<p >You can set channel allowed in your region (AS_923, EU_868 or US915).</p><ul>
<li>For US_915 the channels can be [0 - 7]</li>
<li>Use MULTI if you want random channel</li>
</ul>
<h2><a class="anchor" id="autotoc_md80"></a>
Syntax</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setChannel(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> channel);</div>
</div><!-- fragment --> <h3><a class="anchor" id="autotoc_md81"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">    Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">    <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set random Channel</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a3a837acdbe60fbf82bc91a0aff5fac80">setChannel</a>(<a class="code hl_enumvalue" href="_struct_8h.html#a30e77e0b6fd428a0cceed4edb1ddbd20a3b6e3be2dfacfb1d14722ea50147ac05">MULTI</a>);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md82"></a>
Set Data Rate</h2>
<p >You can set data rate allowed in your region (AS_923, EU_868 or US915).</p>
<h1><a class="anchor" id="autotoc_md83"></a>
For AU915</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">data_rate   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Config   </th><th class="markdownTableHeadNone">Direction    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">DR0   </td><td class="markdownTableBodyNone">SF12 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">DR1   </td><td class="markdownTableBodyNone">SF11 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">DR2   </td><td class="markdownTableBodyNone">SF10 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">DR3   </td><td class="markdownTableBodyNone">SF9 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">DR4   </td><td class="markdownTableBodyNone">SF8 BW 500 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">DR5   </td><td class="markdownTableBodyNone">SF7 BW 500 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">DR6   </td><td class="markdownTableBodyNone">SF8 BW 500 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">7   </td><td class="markdownTableBodyNone">RFU   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">DR8   </td><td class="markdownTableBodyNone">SF12 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">DR9   </td><td class="markdownTableBodyNone">SF11 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">DR10   </td><td class="markdownTableBodyNone">SF10 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">DR11   </td><td class="markdownTableBodyNone">SF9 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">DR12   </td><td class="markdownTableBodyNone">SF8 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">DR13   </td><td class="markdownTableBodyNone">SF7 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">14   </td><td class="markdownTableBodyNone">RFU   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td></tr>
</table>
<p>| 15 | Defined in LoRaWAN | N/A |</p>
<p >For AU915 is important to remark that DR0-DR5 are only for UPLINKS and DR8-DR13 are only for DOWNLINKS</p>
<h1><a class="anchor" id="autotoc_md84"></a>
For AS923 or EU868</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">data_rate   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Config   </th><th class="markdownTableHeadNone">Direction    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">DR0   </td><td class="markdownTableBodyNone">SF12 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">DR1   </td><td class="markdownTableBodyNone">SF11 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">DR2   </td><td class="markdownTableBodyNone">SF10 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">DR3   </td><td class="markdownTableBodyNone">SF9 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">DR4   </td><td class="markdownTableBodyNone">SF8 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5   </td><td class="markdownTableBodyNone">DR5   </td><td class="markdownTableBodyNone">SF7 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">6   </td><td class="markdownTableBodyNone">DR6   </td><td class="markdownTableBodyNone">SF7 BW 250 KHz   </td><td class="markdownTableBodyNone">Uplink/Downlink   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md85"></a>
For US915</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">data_rate   </th><th class="markdownTableHeadNone">Name   </th><th class="markdownTableHeadNone">Config   </th><th class="markdownTableHeadNone">Direction    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">0   </td><td class="markdownTableBodyNone">DR0   </td><td class="markdownTableBodyNone">SF10 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">1   </td><td class="markdownTableBodyNone">DR1   </td><td class="markdownTableBodyNone">SF9 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">2   </td><td class="markdownTableBodyNone">DR2   </td><td class="markdownTableBodyNone">SF8 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">3   </td><td class="markdownTableBodyNone">DR3   </td><td class="markdownTableBodyNone">SF7 BW 125 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">4   </td><td class="markdownTableBodyNone">DR4   </td><td class="markdownTableBodyNone">SF8 BW 500 KHz   </td><td class="markdownTableBodyNone">Uplink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">5:7   </td><td class="markdownTableBodyNone">RFU   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">8   </td><td class="markdownTableBodyNone">DR8   </td><td class="markdownTableBodyNone">SF12 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">9   </td><td class="markdownTableBodyNone">DR9   </td><td class="markdownTableBodyNone">SF11 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">10   </td><td class="markdownTableBodyNone">DR10   </td><td class="markdownTableBodyNone">SF10 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">11   </td><td class="markdownTableBodyNone">DR11   </td><td class="markdownTableBodyNone">SF9 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">12   </td><td class="markdownTableBodyNone">DR12   </td><td class="markdownTableBodyNone">SF8 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">13   </td><td class="markdownTableBodyNone">DR13   </td><td class="markdownTableBodyNone">SF7 BW 500 KHz   </td><td class="markdownTableBodyNone">Downlink   </td></tr>
</table>
<p >For US915 is important to remark that DR0-DR4 are only for UPLINKS and DR8-DR10 are only for DOWNLINKS</p>
<p >*RFU: Reserved for future use</p>
<h2><a class="anchor" id="autotoc_md86"></a>
Syntax</h2>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setDataRate(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data_rate);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md87"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  <span class="comment">// Setup loraid access</span></div>
<div class="line">  <span class="keywordflow">if</span>(!<a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a1282c88d2317fcf7c318a5efeab2afc2">init</a>()){</div>
<div class="line">  Serial.println(<span class="stringliteral">&quot;RFM95 not detected&quot;</span>);</div>
<div class="line">  <span class="keywordflow">while</span>(1);</div>
<div class="line">  }</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Set Data Rate to SF10 BW 125 KHz</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#a487c4a583cb809a2cfc6ddad19acb0fa">setDataRate</a>(2);</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md88"></a>
Send data to LoRaWAN</h2>
<p >You need to specify the length of data you want to send and also the message type (unconfirmed or confirmed message). Set <code>confirm = 0</code> to send unconfirmed message and <code>confirm = 1</code>' to send confirmed message.</p>
<h3><a class="anchor" id="autotoc_md89"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> sendUplink(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> len, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> confirm);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md90"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <span class="comment">// put your main code here, to run repeatedly:</span></div>
<div class="line">  <span class="keywordtype">char</span> myStr[] = <span class="stringliteral">&quot;Ini data LoRaku&quot;</span>;  </div>
<div class="line"> </div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#ad6febfbb51e2ce0a077441fe3361ff69">sendUplink</a>(myStr, strlen(myStr), 0);</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">} </div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_ad6febfbb51e2ce0a077441fe3361ff69"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#ad6febfbb51e2ce0a077441fe3361ff69">LoRaWANClass::sendUplink</a></div><div class="ttdeci">void sendUplink(char *data, unsigned int len, unsigned char confirm, unsigned char mport)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:283</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md91"></a>
Update and run LoRa FSM</h2>
<p >Update and run the LoRa Finite State Machine (FSM). This line should be put inside the Arduino <code>loop</code> block.</p>
<h3><a class="anchor" id="autotoc_md92"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> update(<span class="keywordtype">void</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md93"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Check Lora RX</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#ae6cdd859fb02a42ba898ba57f490c980">update</a>();</div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_ae6cdd859fb02a42ba898ba57f490c980"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#ae6cdd859fb02a42ba898ba57f490c980">LoRaWANClass::update</a></div><div class="ttdeci">void update(void)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:390</div></div>
</div><!-- fragment --><p >In this version we'll try to use interrupts in order to eliminate this FSM.</p>
<h2><a class="anchor" id="autotoc_md94"></a>
Check and retrieve incoming data</h2>
<p >Check for the latest incoming data from server either in binary or string format. You need to provide char buffer to read the data. </p>
<h3><a class="anchor" id="autotoc_md95"></a>
Syntax</h3>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> readData(<span class="keywordtype">void</span>);</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md96"></a>
Example</h3>
<div class="fragment"><div class="line"><span class="keywordtype">char</span> buffer_rx[255];</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> setup() {</div>
<div class="line">  ...</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">void</span> loop() {</div>
<div class="line">  <span class="keywordtype">int</span> recvStatus;</div>
<div class="line">  ...</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// LoRa FSM</span></div>
<div class="line">  <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#ae6cdd859fb02a42ba898ba57f490c980">update</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// Check data</span></div>
<div class="line">  recvStatus = <a class="code hl_variable" href="lorawan-arduino-rfm_8cpp.html#a0d77a82962c460e40c0eb9616a1498d7">lora</a>.<a class="code hl_function" href="class_lo_ra_w_a_n_class.html#aaa2e249f04a23e34118ead08b6e9da84">readData</a>(buffer_rx);</div>
<div class="line">  <span class="keywordflow">if</span>(recvStatus) {</div>
<div class="line">    Serial.println(buffer_rx);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="ttc" id="aclass_lo_ra_w_a_n_class_html_aaa2e249f04a23e34118ead08b6e9da84"><div class="ttname"><a href="class_lo_ra_w_a_n_class.html#aaa2e249f04a23e34118ead08b6e9da84">LoRaWANClass::readData</a></div><div class="ttdeci">int readData(char *outBuff)</div><div class="ttdef"><b>Definition:</b> lorawan-arduino-rfm.cpp:356</div></div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath">
    <!-- id is needed for treeview function! -->
    <ul>
        <li class="footer">
            Generated on Mon Mar 21 2022 08:21:08 for LoRa RFM96W Arduino library by <a href="http://www.doxygen.org/index.html">
                <img class="footer" src="doxygen.png" alt="doxygen"
                    onerror="this.onerror=null;this.src='doxygen.svg';" /></a> 1.9.3.
            Dark theme by <a href="http://majerle.eu" target="_new">Tilen Majerle</a>. All rights reserved.
            Copyright: <a href="https://www.soldered.com">Soldered</a>
        </li>
    </ul>
</div>
<script src="custom.js"></script>
</body>
</html>
